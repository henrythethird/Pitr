{% import "macros/tags.macro.html.twig" as tags %}

{% block body %}
    <button class="btn btn-default pull-right" data-toggle="modal" data-target="#add-document-modal">
        <i class="glyphicon glyphicon-plus"></i> Add Document
    </button>
    <h1 class="text-center">{{ title }}</h1>

    <br>
    {% if documents|length %}
        <table class="table table-striped table-hover">
            <tr>
                <th>Name</th>
                <th>Created</th>
                <th>Tags</th>
            </tr>
            {% for document in documents %}
                <tr class="pointer" onclick="document.location.href='{{ path('document_details', {'id': document.id }) }}'">
                    <td>{{ document.name }}</td>
                    <td>{{ document.dateCreated|date('d.m.Y H:i') }}</td>
                    <td>
                        {% for tag in document.tags %}
                            {{ tags.show(tag) }}
                        {% endfor %}
                    </td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p class="text-center">
            No results
        </p>
    {% endif %}

    <div class="modal fade" id="add-document-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Add Document</h4>
                </div>
                <div class="modal-body" style="padding: 0">
                    <form id="js-dz" class="dropzone" action="{{ oneup_uploader_endpoint('documents') }}" style="padding: 40px">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}